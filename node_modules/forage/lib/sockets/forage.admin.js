var socketAdmin,
    Q = require('q');
    
(function () {
    "use strict"
    
    var Forage;
    
    socketAdmin = function (socket) {
        
        var self = this;
        
        this.socket = socket;
        
        this.initialize = function () {
            var deferred = Q.defer();
            
            Forage = module.parent.parent.exports;
            
            deferred.resolve();
            
            return deferred.promise;
        };
        
        this.getGamesList = function () {
            self.socket.emit('gamesList', Forage.games.listAll());
        };
        
        this.setupListeners = function () {
            var deferred = Q.defer();
            
            self.socket.on('gamesList', self.getGamesList);
            //self.socket.on('playersList', self.getPlayersList);
            //self.socket.on('lanternsList', self.getLanternsList);
            
            deferred.resolve();
            
            return deferred.promise;
        }
        
        this.initialize();
        
    };
    
}());

module.exports = socketAdmin;